{
    "$id": "http://socless-apb-validator.socless/decorator-task#",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "properties": {
        "Type": {
            "type": "string",
            "pattern": "^(Task|Interaction)$"
        },
        "Next": {
            "type": "string"
        },
        "End": {
            "enum": [true]
        },
        "Comment": {
            "type": "string"
        },
        "OutputPath": {
            "type": ["string", "null"]
        },
        "InputPath": {
            "type": ["string", "null"]
        },
        "Resource": {
            "oneOf": [
                {
                    "type": "string"
                },
                {
                    "type": "object"
                }
            ]
        },
        "ResultPath": {
            "type": ["string", "null"]
        },
        "Retry": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "ErrorEquals": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "IntervalSeconds": {
                        "type": "number",
                        "minimum": 0
                    },
                    "MaxAttempts": {
                        "type": "number",
                        "minimum": 0
                    },
                    "BackoffRate": {
                        "type": "number",
                        "minimum": 0
                    }
                },
                "required": ["ErrorEquals"]
            }
        },
        "Catch": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "ErrorEquals": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "Next": {
                        "type": "string"
                    },
                    "ResultPath": {
                        "type": ["string", "null"]
                    }
                },
                "required": ["ErrorEquals", "Next"]
            }
        },
        "TimeoutSeconds": {
            "type": "number",
            "minimum": 1
        },
        "TimeoutSecondsPath": {
            "type": "string"
        },
        "HeartbeatSeconds": {
            "type": "number",
            "minimum": 1
        },
        "HeartbeatSecondsPath": {
            "type": "string"
        },
        "ResultSelector": {
            "type": "object"
        },
        "Parameters": {
            "anyOf": [
                { "type": "object" },
                {
                    "type": "array",
                    "items": {
                        "type": "object"
                    }
                }
            ]
        }
    },
    "required": ["Type", "Resource"],
    "additionalProperties": false
}
